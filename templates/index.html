<!DOCTYPE html>
<html>
<head>
    <title>Random Charter Flight Generator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; }
        label { font-weight: bold; }
        .error { color: red; }
        .filter-group { margin-bottom: 1em; }
    </style>
</head>
<body>
    <h1>Charter Flight Finder</h1>
    <form method="POST">
        <div class="filter-group">
            <label>Departure ICAO:</label>
            <input type="text" name="departure_icao" value="{{ user_input.departure_icao }}" required maxlength="6" style="text-transform:uppercase;">
        </div>
        <div class="filter-group">
            <label>Min Distance (nm):</label>
            <input type="number" name="min_distance" value="{{ user_input.min_distance }}" min="0" required>
            <label>Max Distance (nm):</label>
            <input type="number" name="max_distance" value="{{ user_input.max_distance }}" min="1" required>
        </div>
        <div class="filter-group">
            <label>Min Runway Length (ft):</label>
            <input type="number" name="min_runway_length" value="{{ user_input.min_runway_length }}" min="0" required>
        </div>
        <div class="filter-group">
            <label>Runway Surface:</label>
            <input type="checkbox" name="surface" value="turf" {% if 'turf' in user_input.surface %}checked{% endif %}>Grass/Turf
            <input type="checkbox" name="surface" value="asph" {% if 'asph' in user_input.surface %}checked{% endif %}>Asphalt
            <input type="checkbox" name="surface" value="grvl" {% if 'grvl' in user_input.surface %}checked{% endif %}>Gravel
            <input type="checkbox" name="surface" value="concrete" {% if 'concrete' in user_input.surface %}checked{% endif %}>Concrete
            <input type="checkbox" name="surface" value="dirt" {% if 'dirt' in user_input.surface %}checked{% endif %}>Dirt
        </div>
        <div class="filter-group">
            <label>Max Passengers:</label>
            <input type="number" name="max_passengers" value="{{ user_input.max_passengers }}" min="1" max="50" required>
        </div>
        <button type="submit">Find Destinations</button>
    </form>

    {% if error %}
        <div class="error">{{ error }}</div>
    {% endif %}

    {% if results %}
        <h2>Matching Destinations</h2>
        <table border="1" cellpadding="5" cellspacing="0">
            <tr>
                <th>ICAO</th>
                <th>Name</th>
                <th>Location</th>
            </tr>
            {% for r in results %}
                <tr>
                    <td>{{ r.icao }}</td>
                    <td>{{ r.name }}</td>
                    <td>{{ r.location }}</td>
                </tr>
            {% endfor %}
        </table>
    {% endif %}
</body>
</html>